# 盯盘管理功能说明

## 功能概述

新的盯盘管理功能将盯盘记录从分析详情页面中分离出来，创建了独立的盯盘管理页面，提供更好的用户体验和功能组织。

## 主要特性

### 1. 盯盘管理页面 (`MonitoringListScreen`)
- **显示所有正在盯盘的股票列表**
- **每只股票显示关键信息**：
  - 股票代码和名称
  - 盯盘状态（运行中/已停止/错误）
  - 盯盘间隔（5分钟/10分钟/30分钟/1小时）
  - 开始时间和最后运行时间
  - 最后消息内容

- **操作功能**：
  - 查看盯盘记录
  - 停止盯盘
  - 启动新的盯盘任务

### 2. 盯盘记录详情页面 (`MonitoringRecordsScreen`)
- **显示指定股票的盯盘记录**
- **记录内容展示**：
  - 时间戳和序号
  - 完整的盯盘内容
  - T+0交易建议标识
  - 置信度显示
  - 可展开/收起长内容

### 3. 导航集成
- **在分析页面添加"盯盘管理"按钮**
- **独立的导航路由**：
  - `MonitoringList` - 盯盘管理
  - `MonitoringRecords` - 盯盘记录详情

## 技术实现

### 前端组件
```javascript
// 新增的页面组件
- MonitoringListScreen.js     // 盯盘管理列表
- MonitoringRecordsScreen.js  // 盯盘记录详情

// 修改的组件
- AnalysisScreen.js           // 添加盯盘管理按钮
- App.js                     // 添加新路由
- ApiService.js              // 添加getAllMonitoringJobs方法
```

### 后端API
```java
// 新增的控制器端点
GET /api/stocks/monitor/all-jobs    // 获取所有盯盘任务

// 新增的服务方法
StockAnalysisService.getAllMonitoringJobs()
```

### 数据库查询
```java
// 使用现有的Repository方法
StockMonitoringJobRepository.findAllRunningJobs()
```

## 用户体验改进

### 1. 功能分离
- **分析页面**：专注于股票分析和启动盯盘
- **盯盘管理页面**：统一管理所有盯盘任务
- **盯盘记录页面**：查看详细的盯盘历史

### 2. 界面优化
- **清晰的卡片布局**：每只股票一个卡片
- **状态指示器**：颜色编码的状态显示
- **操作按钮**：直观的查看和停止按钮
- **响应式设计**：支持下拉刷新和展开/收起

### 3. 导航便利性
- **快速访问**：从分析页面一键进入盯盘管理
- **返回导航**：支持返回上一级页面
- **路由管理**：清晰的页面层级结构

## 使用方法

### 1. 访问盯盘管理
1. 在分析页面点击"盯盘管理"按钮
2. 进入盯盘管理页面，查看所有盯盘任务

### 2. 查看盯盘记录
1. 在盯盘管理页面点击"查看记录"按钮
2. 进入盯盘记录详情页面
3. 查看该股票的详细盯盘历史

### 3. 管理盯盘任务
1. 在盯盘管理页面可以停止特定股票的盯盘
2. 使用"启动盯盘"按钮添加新的盯盘任务
3. 监控所有盯盘任务的状态和进度

## 配置要求

### 1. 前端依赖
- React Native Paper 组件库
- Expo Vector Icons
- React Navigation

### 2. 后端依赖
- Spring Boot 2.7+
- JPA/Hibernate
- PostgreSQL 数据库

### 3. API Gateway
- Node.js Express
- http-proxy-middleware

## 注意事项

### 1. 数据一致性
- 盯盘任务状态在数据库和内存中保持同步
- 应用关闭时自动清理所有运行中的任务

### 2. 性能考虑
- 盯盘记录支持分页和懒加载
- 定期清理过期的盯盘数据

### 3. 错误处理
- 网络异常时的友好提示
- 盯盘任务失败时的状态更新
- 自动重试机制

## 未来扩展

### 1. 功能增强
- 盯盘任务批量操作
- 盯盘历史数据导出
- 盯盘策略模板管理

### 2. 用户体验
- 盯盘任务搜索和筛选
- 盯盘数据图表展示
- 盯盘提醒设置

### 3. 系统集成
- 与消息推送系统集成
- 与交易系统联动
- 多设备同步支持
